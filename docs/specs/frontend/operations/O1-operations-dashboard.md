# æ¨¡å—å¼€å‘è§„æ ¼ä¹¦ï¼šO1 è¿è¥æ§åˆ¶å°ä»ªè¡¨æ¿

## æ–‡æ¡£ä¿¡æ¯
| é¡¹ç›® | å†…å®¹ |
|-----|------|
| æ¨¡å—ID | O1 |
| æ¨¡å—åç§° | OperationsDashboard - è¿è¥æ§åˆ¶å°ä»ªè¡¨æ¿ |
| ç‰ˆæœ¬ | 1.0 |
| æ—¥æœŸ | 2026å¹´1æœˆ |
| çŠ¶æ€ | è§„åˆ’ä¸­ |
| å‰ç½®ä¾èµ– | G6æ•°æ®APIã€G4æœºå™¨äººAPIã€F1æ•°æ®æ¨¡å‹ |

---

## 1. æ¨¡å—æ¦‚è¿°

### 1.1 èŒè´£æè¿°

OperationsDashboardæ˜¯è¿è¥æ§åˆ¶å°çš„æ ¸å¿ƒä»ªè¡¨æ¿é¡µé¢ï¼Œä¸ºè¿è¥ç»ç†æä¾›å…¨å±€è¿è¥è§†å›¾ï¼ŒåŒ…æ‹¬KPIæŒ‡æ ‡ã€æœºå™¨äººçŠ¶æ€æ¦‚è§ˆã€ä»»åŠ¡è¿›åº¦ã€å‘Šè­¦ç»Ÿè®¡ç­‰å…³é”®ä¿¡æ¯ï¼Œæ”¯æŒå¿«é€Ÿå®šä½é—®é¢˜å’Œå†³ç­–ã€‚

### 1.2 åœ¨ç³»ç»Ÿä¸­çš„ä½ç½®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      è¿è¥æ§åˆ¶å° (Operations Console)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    â˜… O1: è¿è¥ä»ªè¡¨æ¿ (Dashboard) â˜…                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚  â”‚  â”‚ KPIå¡ç‰‡åŒº: å®Œæˆç‡ | æ•ˆç‡ | åœ¨çº¿ç‡ | å‘Šè­¦æ•°                   â”‚â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ æœºå™¨äººçŠ¶æ€åˆ†å¸ƒ          â”‚ â”‚ ä»Šæ—¥ä»»åŠ¡è¿›åº¦                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ [é¥¼å›¾]                  â”‚ â”‚ [è¿›åº¦æ¡+åˆ—è¡¨]                  â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ æ•ˆç‡è¶‹åŠ¿å›¾              â”‚ â”‚ å‘Šè­¦åˆ—è¡¨                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ [æŠ˜çº¿å›¾]                â”‚ â”‚ [æœ€æ–°å‘Šè­¦]                     â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ O2: ä»»åŠ¡  â”‚ â”‚ O3: æœºå™¨äººâ”‚ â”‚ O4: å‘Šè­¦  â”‚ â”‚ O5: è®¾ç½®  â”‚            â”‚
â”‚  â”‚ ç®¡ç†      â”‚ â”‚ ç›‘æ§      â”‚ â”‚ ç®¡ç†      â”‚ â”‚           â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 åŠŸèƒ½æ¦‚è¿°

| åŠŸèƒ½ | æè¿° | ä¼˜å…ˆçº§ |
|-----|------|-------|
| KPIå¡ç‰‡ | å±•ç¤ºæ ¸å¿ƒKPIæŒ‡æ ‡ï¼ˆå®Œæˆç‡ã€æ•ˆç‡ã€åœ¨çº¿ç‡ç­‰ï¼‰ | P0 |
| æœºå™¨äººçŠ¶æ€ | é¥¼å›¾å±•ç¤ºæœºå™¨äººçŠ¶æ€åˆ†å¸ƒ | P0 |
| ä»»åŠ¡è¿›åº¦ | ä»Šæ—¥ä»»åŠ¡å®Œæˆè¿›åº¦å’Œåˆ—è¡¨ | P0 |
| æ•ˆç‡è¶‹åŠ¿ | å±•ç¤ºè¿‘7å¤©/30å¤©æ•ˆç‡è¶‹åŠ¿ | P1 |
| å‘Šè­¦æ‘˜è¦ | æœ€æ–°æœªå¤„ç†å‘Šè­¦åˆ—è¡¨ | P1 |
| æ¥¼å®‡ç­›é€‰ | æŒ‰æ¥¼å®‡/æ¥¼å±‚ç­›é€‰æ•°æ® | P1 |
| æ—¶é—´èŒƒå›´ | é€‰æ‹©ä¸åŒæ—¶é—´èŒƒå›´çš„æ•°æ® | P1 |
| æ•°æ®åˆ·æ–° | è‡ªåŠ¨/æ‰‹åŠ¨åˆ·æ–°æ•°æ® | P2 |
| å¯¼å‡ºæŠ¥è¡¨ | å¯¼å‡ºä»ªè¡¨æ¿æ•°æ® | P2 |

---

## 2. UIè®¾è®¡

### 2.1 é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¡¶éƒ¨ç­›é€‰æ                                                                   â”‚
â”‚ [æ¥¼å®‡: å…¨éƒ¨ â–¼] [æ¥¼å±‚: å…¨éƒ¨ â–¼] [æ—¶é—´: ä»Šæ—¥ â–¼]  [ğŸ”„ åˆ·æ–°] [ğŸ“Š å¯¼å‡º]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“ˆ æ¸…æ´å®Œæˆç‡ â”‚ â”‚ âš¡ å¹³å‡æ•ˆç‡   â”‚ â”‚ ğŸ¤– æœºå™¨äººåœ¨çº¿ â”‚ â”‚ âš ï¸ å¾…å¤„ç†å‘Šè­¦  â”‚  â”‚
â”‚  â”‚               â”‚ â”‚               â”‚ â”‚               â”‚ â”‚               â”‚  â”‚
â”‚  â”‚    87.5%      â”‚ â”‚   156 mÂ²/h    â”‚ â”‚   8/10 å°     â”‚ â”‚    3 æ¡       â”‚  â”‚
â”‚  â”‚   â†‘ 2.3%     â”‚ â”‚   â†‘ 5.2%     â”‚ â”‚   â†“ 1 å°     â”‚ â”‚   â†‘ 1 æ¡     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æœºå™¨äººçŠ¶æ€åˆ†å¸ƒ                  â”‚ â”‚ ä»Šæ—¥ä»»åŠ¡è¿›åº¦                    â”‚  â”‚
â”‚  â”‚                                 â”‚ â”‚                                 â”‚  â”‚
â”‚  â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘  75%        â”‚  â”‚
â”‚  â”‚     â•±    â•²    å·¥ä½œä¸­: 5        â”‚ â”‚                                 â”‚  â”‚
â”‚  â”‚    â”‚ 62.5% â”‚   å……ç”µä¸­: 2       â”‚ â”‚ å·²å®Œæˆ: 12 / 16 ä»»åŠ¡            â”‚  â”‚
â”‚  â”‚     â•²    â•±    ç©ºé—²: 1         â”‚ â”‚                                 â”‚  â”‚
â”‚  â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  ç¦»çº¿: 2      â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚                                 â”‚ â”‚ â”‚ âœ… 1Få¤§å ‚æ¸…æ´    09:00å®Œæˆ  â”‚ â”‚  â”‚
â”‚  â”‚  ğŸŸ¢ å·¥ä½œä¸­  ğŸ”µ å……ç”µ  âšª ç©ºé—²   â”‚ â”‚ â”‚ âœ… 2Fèµ°å»Šæ¸…æ´    10:30å®Œæˆ  â”‚ â”‚  â”‚
â”‚  â”‚  ğŸ”´ ç¦»çº¿                       â”‚ â”‚ â”‚ ğŸ”„ 3Fä¼šè®®å®¤      è¿›è¡Œä¸­...   â”‚ â”‚  â”‚
â”‚  â”‚                                 â”‚ â”‚ â”‚ â³ 4FåŠå…¬åŒº      å¾…æ‰§è¡Œ      â”‚ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ¸…æ´æ•ˆç‡è¶‹åŠ¿ï¼ˆè¿‘7å¤©ï¼‰           â”‚ â”‚ æœ€æ–°å‘Šè­¦                        â”‚  â”‚
â”‚  â”‚                                 â”‚ â”‚                                 â”‚  â”‚
â”‚  â”‚  180 â”¤        â•­â”€â”€â•®             â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  160 â”¤    â•­â”€â”€â”€â•¯  â•°â”€â”€â•®         â”‚ â”‚ â”‚ ğŸ”´ R3 ç”µé‡ä½äº10%   5åˆ†é’Ÿå‰ â”‚ â”‚  â”‚
â”‚  â”‚  140 â”¤ â”€â”€â”€â•¯          â•°â”€â”€      â”‚ â”‚ â”‚ ğŸŸ¡ R5 æ¸…æ´æ•ˆç‡ä¸‹é™  15åˆ†é’Ÿå‰â”‚ â”‚  â”‚
â”‚  â”‚  120 â”¤                         â”‚ â”‚ â”‚ ğŸŸ¡ ä»»åŠ¡å»¶è¿Ÿå‘Šè­¦    30åˆ†é’Ÿå‰ â”‚ â”‚  â”‚
â”‚  â”‚      â””â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€   â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚        å‘¨ä¸€ äºŒ  ä¸‰ å›› äº” å…­ æ—¥  â”‚ â”‚                                 â”‚  â”‚
â”‚  â”‚                                 â”‚ â”‚ [æŸ¥çœ‹å…¨éƒ¨å‘Šè­¦ â†’]               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ æœ€åæ›´æ–°: 2026-01-20 14:30:25 | è‡ªåŠ¨åˆ·æ–°: 5åˆ†é’Ÿ                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 KPIå¡ç‰‡è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        KPIå¡ç‰‡æ ·å¼                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  æ­£å¸¸çŠ¶æ€:                    è­¦å‘ŠçŠ¶æ€:                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ ğŸ“ˆ æ¸…æ´å®Œæˆç‡      â”‚       â”‚ âš ï¸ æ¸…æ´å®Œæˆç‡      â”‚             â”‚
â”‚  â”‚                   â”‚       â”‚                   â”‚             â”‚
â”‚  â”‚      87.5%        â”‚       â”‚      65.2%        â”‚             â”‚
â”‚  â”‚                   â”‚       â”‚                   â”‚             â”‚
â”‚  â”‚   â†‘ 2.3% vsæ˜¨æ—¥  â”‚       â”‚   â†“ 5.1% vsæ˜¨æ—¥  â”‚             â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚       â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚
â”‚  â”‚   ç›®æ ‡: 85%  âœ“   â”‚       â”‚   ç›®æ ‡: 85%  âœ—   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚   border: green              border: orange                    â”‚
â”‚   bg: green/5                bg: orange/5                      â”‚
â”‚                                                                 â”‚
â”‚  ä¸¥é‡çŠ¶æ€:                    åŠ è½½çŠ¶æ€:                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ ğŸ”´ æœºå™¨äººåœ¨çº¿      â”‚       â”‚ ğŸ“ˆ æ¸…æ´å®Œæˆç‡      â”‚             â”‚
â”‚  â”‚                   â”‚       â”‚                   â”‚             â”‚
â”‚  â”‚      3/10 å°      â”‚       â”‚    â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘       â”‚             â”‚
â”‚  â”‚                   â”‚       â”‚    åŠ è½½ä¸­...      â”‚             â”‚
â”‚  â”‚   â†“ 7å° vsæ˜¨æ—¥   â”‚       â”‚                   â”‚             â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚       â”‚                   â”‚             â”‚
â”‚  â”‚   é˜ˆå€¼: 80%  âœ—   â”‚       â”‚                   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚   border: red                border: gray                      â”‚
â”‚   bg: red/5                  bg: gray/5                        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 é¢œè‰²è§„èŒƒ

```css
/* çŠ¶æ€é¢œè‰² */
--color-success: #22C55E;     /* æ­£å¸¸/è¾¾æ ‡ */
--color-warning: #F59E0B;     /* è­¦å‘Š/æ¥è¿‘é˜ˆå€¼ */
--color-error: #EF4444;       /* ä¸¥é‡/æœªè¾¾æ ‡ */
--color-info: #3B82F6;        /* ä¿¡æ¯/ä¸­æ€§ */

/* KPIè¶‹åŠ¿é¢œè‰² */
--color-trend-up: #22C55E;    /* ä¸Šå‡è¶‹åŠ¿ï¼ˆæ­£å‘ï¼‰ */
--color-trend-down: #EF4444;  /* ä¸‹é™è¶‹åŠ¿ï¼ˆè´Ÿå‘ï¼‰ */
--color-trend-flat: #6B7280;  /* æŒå¹³ */

/* æœºå™¨äººçŠ¶æ€é¢œè‰² */
--color-robot-working: #22C55E;
--color-robot-charging: #3B82F6;
--color-robot-idle: #9CA3AF;
--color-robot-offline: #EF4444;
--color-robot-error: #EF4444;

/* å›¾è¡¨é…è‰² */
--chart-primary: #6366F1;     /* ä¸»è¦æ•°æ®ç³»åˆ— */
--chart-secondary: #EC4899;   /* æ¬¡è¦æ•°æ®ç³»åˆ— */
--chart-grid: #E5E7EB;        /* ç½‘æ ¼çº¿ */
```

---

## 3. ç»„ä»¶æ¥å£

### 3.1 Propså®šä¹‰

```typescript
// pages/operations/dashboard/types.ts

interface OperationsDashboardProps {
  /** é»˜è®¤é€‰ä¸­çš„æ¥¼å®‡ID */
  defaultBuildingId?: string;
  
  /** é»˜è®¤æ—¶é—´èŒƒå›´ */
  defaultTimeRange?: TimeRange;
  
  /** è‡ªåŠ¨åˆ·æ–°é—´éš”ï¼ˆæ¯«ç§’ï¼‰ï¼Œ0è¡¨ç¤ºä¸è‡ªåŠ¨åˆ·æ–° */
  refreshInterval?: number;
  
  /** KPIé˜ˆå€¼é…ç½® */
  thresholds?: KPIThresholds;
}

type TimeRange = 'today' | 'yesterday' | 'week' | 'month';

interface KPIThresholds {
  completionRate: {
    warning: number;  // ä½äºæ­¤å€¼æ˜¾ç¤ºè­¦å‘Šï¼ˆå¦‚0.8ï¼‰
    critical: number; // ä½äºæ­¤å€¼æ˜¾ç¤ºä¸¥é‡ï¼ˆå¦‚0.6ï¼‰
  };
  efficiency: {
    warning: number;
    critical: number;
  };
  onlineRate: {
    warning: number;
    critical: number;
  };
  alertCount: {
    warning: number;
    critical: number;
  };
}

// KPIæ•°æ®
interface KPIData {
  completionRate: {
    value: number;           // 0-1
    trend: number;           // ç›¸æ¯”æ˜¨æ—¥å˜åŒ–ï¼ˆç™¾åˆ†ç‚¹ï¼‰
    target: number;          // ç›®æ ‡å€¼
  };
  efficiency: {
    value: number;           // mÂ²/h
    trend: number;           // å˜åŒ–ç™¾åˆ†æ¯”
    target: number;
  };
  robotOnline: {
    online: number;
    total: number;
    trend: number;           // å˜åŒ–æ•°é‡
  };
  pendingAlerts: {
    count: number;
    trend: number;
    bySeverity: {
      critical: number;
      high: number;
      medium: number;
      low: number;
    };
  };
}

// æœºå™¨äººçŠ¶æ€åˆ†å¸ƒ
interface RobotStatusDistribution {
  working: number;
  charging: number;
  idle: number;
  paused: number;
  error: number;
  offline: number;
}

// ä»»åŠ¡è¿›åº¦
interface TaskProgress {
  total: number;
  completed: number;
  inProgress: number;
  pending: number;
  failed: number;
  tasks: TaskSummary[];
}

interface TaskSummary {
  id: string;
  name: string;
  status: 'completed' | 'in_progress' | 'pending' | 'failed';
  scheduledTime: string;
  completedTime?: string;
  robotName?: string;
}

// æ•ˆç‡è¶‹åŠ¿
interface EfficiencyTrend {
  period: string;  // æ—¥æœŸ
  value: number;   // æ•ˆç‡å€¼
  target: number;  // ç›®æ ‡å€¼
}

// å‘Šè­¦æ‘˜è¦
interface AlertSummary {
  id: string;
  severity: 'critical' | 'high' | 'medium' | 'low';
  type: string;
  message: string;
  robotId?: string;
  robotName?: string;
  createdAt: string;
  acknowledged: boolean;
}
```

### 3.2 APIè°ƒç”¨

```typescript
// è·å–KPIæ¦‚è§ˆ
GET /api/v1/data/kpi-overview
Query: {
  building_id?: string;
  floor_id?: string;
  date: string;          // YYYY-MM-DD
}
Response: KPIData

// è·å–æœºå™¨äººçŠ¶æ€åˆ†å¸ƒ
GET /api/v1/robots/status-distribution
Query: {
  building_id?: string;
  floor_id?: string;
}
Response: RobotStatusDistribution

// è·å–ä»Šæ—¥ä»»åŠ¡è¿›åº¦
GET /api/v1/tasks/today-progress
Query: {
  building_id?: string;
  floor_id?: string;
}
Response: TaskProgress

// è·å–æ•ˆç‡è¶‹åŠ¿
GET /api/v1/data/efficiency-trend
Query: {
  building_id?: string;
  floor_id?: string;
  period: 'week' | 'month';
  granularity: 'day' | 'hour';
}
Response: EfficiencyTrend[]

// è·å–æœ€æ–°å‘Šè­¦
GET /api/v1/alerts
Query: {
  building_id?: string;
  status: 'pending';
  limit: 5;
  sort: '-created_at';
}
Response: { items: AlertSummary[], total: number }
```

---

## 4. å®ç°è¦æ±‚

### 4.1 æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|-----|------|------|
| React | 18+ | UIæ¡†æ¶ |
| TypeScript | 5.0+ | ç±»å‹å®‰å…¨ |
| TailwindCSS | 3.4+ | æ ·å¼ |
| React Query | 5.0+ | æ•°æ®è·å–å’Œç¼“å­˜ |
| Recharts | 2.10+ | å›¾è¡¨æ¸²æŸ“ |
| date-fns | 3.0+ | æ—¥æœŸå¤„ç† |

### 4.2 æ ¸å¿ƒå®ç°

#### 4.2.1 ä»ªè¡¨æ¿é¡µé¢

```typescript
// pages/operations/dashboard/index.tsx
import React, { useState, useCallback } from 'react';
import { useQuery } from '@tanstack/react-query';
import { KPICards } from './components/KPICards';
import { RobotStatusChart } from './components/RobotStatusChart';
import { TaskProgressCard } from './components/TaskProgressCard';
import { EfficiencyTrendChart } from './components/EfficiencyTrendChart';
import { AlertList } from './components/AlertList';
import { DashboardFilters } from './components/DashboardFilters';
import { 
  fetchKPIOverview, 
  fetchRobotStatusDistribution,
  fetchTaskProgress,
  fetchEfficiencyTrend,
  fetchAlerts,
} from '../../../api/data';
import { OperationsDashboardProps, TimeRange } from './types';

const DEFAULT_THRESHOLDS: KPIThresholds = {
  completionRate: { warning: 0.8, critical: 0.6 },
  efficiency: { warning: 120, critical: 100 },
  onlineRate: { warning: 0.8, critical: 0.5 },
  alertCount: { warning: 3, critical: 5 },
};

export const OperationsDashboard: React.FC<OperationsDashboardProps> = ({
  defaultBuildingId,
  defaultTimeRange = 'today',
  refreshInterval = 300000, // 5åˆ†é’Ÿ
  thresholds = DEFAULT_THRESHOLDS,
}) => {
  // ç­›é€‰çŠ¶æ€
  const [buildingId, setBuildingId] = useState<string | undefined>(defaultBuildingId);
  const [floorId, setFloorId] = useState<string | undefined>();
  const [timeRange, setTimeRange] = useState<TimeRange>(defaultTimeRange);

  // è·å–å½“å‰æ—¥æœŸ
  const getDateByRange = useCallback((range: TimeRange): string => {
    const now = new Date();
    switch (range) {
      case 'yesterday':
        now.setDate(now.getDate() - 1);
        break;
      default:
        break;
    }
    return now.toISOString().split('T')[0];
  }, []);

  const currentDate = getDateByRange(timeRange);

  // æ•°æ®æŸ¥è¯¢
  const { data: kpiData, isLoading: kpiLoading } = useQuery({
    queryKey: ['kpi-overview', buildingId, floorId, currentDate],
    queryFn: () => fetchKPIOverview({ building_id: buildingId, floor_id: floorId, date: currentDate }),
    refetchInterval: refreshInterval,
  });

  const { data: robotStatus, isLoading: robotStatusLoading } = useQuery({
    queryKey: ['robot-status-distribution', buildingId, floorId],
    queryFn: () => fetchRobotStatusDistribution({ building_id: buildingId, floor_id: floorId }),
    refetchInterval: refreshInterval,
  });

  const { data: taskProgress, isLoading: taskProgressLoading } = useQuery({
    queryKey: ['task-progress', buildingId, floorId],
    queryFn: () => fetchTaskProgress({ building_id: buildingId, floor_id: floorId }),
    refetchInterval: refreshInterval,
  });

  const { data: efficiencyTrend, isLoading: trendLoading } = useQuery({
    queryKey: ['efficiency-trend', buildingId, floorId, timeRange],
    queryFn: () => fetchEfficiencyTrend({
      building_id: buildingId,
      floor_id: floorId,
      period: timeRange === 'month' ? 'month' : 'week',
      granularity: 'day',
    }),
    refetchInterval: refreshInterval,
  });

  const { data: alerts, isLoading: alertsLoading } = useQuery({
    queryKey: ['alerts-pending', buildingId],
    queryFn: () => fetchAlerts({
      building_id: buildingId,
      status: 'pending',
      limit: 5,
      sort: '-created_at',
    }),
    refetchInterval: refreshInterval,
  });

  // æ‰‹åŠ¨åˆ·æ–°
  const handleRefresh = useCallback(() => {
    // è§¦å‘æ‰€æœ‰æŸ¥è¯¢åˆ·æ–°
  }, []);

  // å¯¼å‡ºæŠ¥è¡¨
  const handleExport = useCallback(() => {
    // å¯¼å‡ºPDFæˆ–Excel
  }, []);

  return (
    <div className="min-h-screen bg-gray-50 p-6">
      {/* é¡µé¢æ ‡é¢˜ */}
      <div className="mb-6">
        <h1 className="text-2xl font-bold text-gray-900">è¿è¥ä»ªè¡¨æ¿</h1>
        <p className="text-gray-500">å®æ—¶ç›‘æ§æ¸…æ´è¿è¥çŠ¶æ€</p>
      </div>

      {/* ç­›é€‰æ  */}
      <DashboardFilters
        buildingId={buildingId}
        floorId={floorId}
        timeRange={timeRange}
        onBuildingChange={setBuildingId}
        onFloorChange={setFloorId}
        onTimeRangeChange={setTimeRange}
        onRefresh={handleRefresh}
        onExport={handleExport}
      />

      {/* KPIå¡ç‰‡ */}
      <div className="mt-6">
        <KPICards
          data={kpiData}
          thresholds={thresholds}
          loading={kpiLoading}
        />
      </div>

      {/* ä¸­é—´è¡Œï¼šæœºå™¨äººçŠ¶æ€ + ä»»åŠ¡è¿›åº¦ */}
      <div className="mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6">
        <RobotStatusChart
          data={robotStatus}
          loading={robotStatusLoading}
        />
        <TaskProgressCard
          data={taskProgress}
          loading={taskProgressLoading}
        />
      </div>

      {/* åº•éƒ¨è¡Œï¼šæ•ˆç‡è¶‹åŠ¿ + å‘Šè­¦åˆ—è¡¨ */}
      <div className="mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6">
        <EfficiencyTrendChart
          data={efficiencyTrend}
          loading={trendLoading}
        />
        <AlertList
          alerts={alerts?.items || []}
          total={alerts?.total || 0}
          loading={alertsLoading}
        />
      </div>

      {/* é¡µè„šï¼šæ›´æ–°æ—¶é—´ */}
      <div className="mt-6 text-center text-sm text-gray-500">
        æœ€åæ›´æ–°: {new Date().toLocaleString('zh-CN')} | 
        è‡ªåŠ¨åˆ·æ–°: {refreshInterval / 1000 / 60}åˆ†é’Ÿ
      </div>
    </div>
  );
};

export default OperationsDashboard;
```

#### 4.2.2 KPIå¡ç‰‡ç»„ä»¶

```typescript
// pages/operations/dashboard/components/KPICards.tsx
import React from 'react';
import { ArrowUpIcon, ArrowDownIcon, MinusIcon } from '@heroicons/react/24/solid';
import { KPIData, KPIThresholds } from '../types';

interface KPICardsProps {
  data?: KPIData;
  thresholds: KPIThresholds;
  loading: boolean;
}

type KPIStatus = 'normal' | 'warning' | 'critical';

const getStatus = (
  value: number,
  threshold: { warning: number; critical: number },
  isHigherBetter: boolean = true
): KPIStatus => {
  if (isHigherBetter) {
    if (value < threshold.critical) return 'critical';
    if (value < threshold.warning) return 'warning';
    return 'normal';
  } else {
    if (value > threshold.critical) return 'critical';
    if (value > threshold.warning) return 'warning';
    return 'normal';
  }
};

const STATUS_STYLES: Record<KPIStatus, string> = {
  normal: 'border-green-200 bg-green-50',
  warning: 'border-yellow-200 bg-yellow-50',
  critical: 'border-red-200 bg-red-50',
};

const TrendIcon: React.FC<{ value: number; positive?: boolean }> = ({ value, positive = true }) => {
  if (value === 0) return <MinusIcon className="w-4 h-4 text-gray-500" />;
  
  const isUp = value > 0;
  const isGood = positive ? isUp : !isUp;
  const color = isGood ? 'text-green-500' : 'text-red-500';
  
  return isUp 
    ? <ArrowUpIcon className={`w-4 h-4 ${color}`} />
    : <ArrowDownIcon className={`w-4 h-4 ${color}`} />;
};

export const KPICards: React.FC<KPICardsProps> = ({
  data,
  thresholds,
  loading,
}) => {
  if (loading) {
    return (
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        {[1, 2, 3, 4].map(i => (
          <div key={i} className="bg-white rounded-lg border p-6 animate-pulse">
            <div className="h-4 bg-gray-200 rounded w-1/2 mb-4" />
            <div className="h-8 bg-gray-200 rounded w-3/4 mb-2" />
            <div className="h-4 bg-gray-200 rounded w-1/3" />
          </div>
        ))}
      </div>
    );
  }

  if (!data) return null;

  const cards = [
    {
      title: 'æ¸…æ´å®Œæˆç‡',
      icon: 'ğŸ“ˆ',
      value: `${(data.completionRate.value * 100).toFixed(1)}%`,
      trend: data.completionRate.trend,
      trendLabel: 'vsæ˜¨æ—¥',
      target: `ç›®æ ‡: ${(data.completionRate.target * 100).toFixed(0)}%`,
      targetMet: data.completionRate.value >= data.completionRate.target,
      status: getStatus(data.completionRate.value, thresholds.completionRate),
    },
    {
      title: 'å¹³å‡æ•ˆç‡',
      icon: 'âš¡',
      value: `${data.efficiency.value.toFixed(0)} mÂ²/h`,
      trend: data.efficiency.trend,
      trendLabel: 'vsæ˜¨æ—¥',
      target: `ç›®æ ‡: ${data.efficiency.target} mÂ²/h`,
      targetMet: data.efficiency.value >= data.efficiency.target,
      status: getStatus(data.efficiency.value, thresholds.efficiency),
    },
    {
      title: 'æœºå™¨äººåœ¨çº¿',
      icon: 'ğŸ¤–',
      value: `${data.robotOnline.online}/${data.robotOnline.total} å°`,
      trend: data.robotOnline.trend,
      trendLabel: 'å° vsæ˜¨æ—¥',
      target: `é˜ˆå€¼: ${(thresholds.onlineRate.warning * 100).toFixed(0)}%`,
      targetMet: data.robotOnline.online / data.robotOnline.total >= thresholds.onlineRate.warning,
      status: getStatus(data.robotOnline.online / data.robotOnline.total, thresholds.onlineRate),
    },
    {
      title: 'å¾…å¤„ç†å‘Šè­¦',
      icon: 'âš ï¸',
      value: `${data.pendingAlerts.count} æ¡`,
      trend: data.pendingAlerts.trend,
      trendLabel: 'æ¡ vsæ˜¨æ—¥',
      target: `é˜ˆå€¼: ${thresholds.alertCount.warning} æ¡`,
      targetMet: data.pendingAlerts.count <= thresholds.alertCount.warning,
      status: getStatus(data.pendingAlerts.count, thresholds.alertCount, false),
      trendPositive: false,
    },
  ];

  return (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
      {cards.map((card, index) => (
        <div
          key={index}
          className={`bg-white rounded-lg border-2 p-6 ${STATUS_STYLES[card.status]}`}
        >
          <div className="flex items-center justify-between mb-2">
            <span className="text-sm font-medium text-gray-600">{card.title}</span>
            <span className="text-xl">{card.icon}</span>
          </div>
          
          <div className="text-3xl font-bold text-gray-900 mb-2">
            {card.value}
          </div>
          
          <div className="flex items-center text-sm mb-3">
            <TrendIcon value={card.trend} positive={card.trendPositive !== false} />
            <span className="ml-1">
              {Math.abs(card.trend).toFixed(1)}{card.trendLabel.includes('%') ? '%' : ''} {card.trendLabel}
            </span>
          </div>
          
          <div className="border-t pt-2 text-sm">
            <span className={card.targetMet ? 'text-green-600' : 'text-red-600'}>
              {card.target} {card.targetMet ? 'âœ“' : 'âœ—'}
            </span>
          </div>
        </div>
      ))}
    </div>
  );
};
```

#### 4.2.3 æœºå™¨äººçŠ¶æ€é¥¼å›¾

```typescript
// pages/operations/dashboard/components/RobotStatusChart.tsx
import React from 'react';
import { PieChart, Pie, Cell, ResponsiveContainer, Legend, Tooltip } from 'recharts';
import { RobotStatusDistribution } from '../types';

interface RobotStatusChartProps {
  data?: RobotStatusDistribution;
  loading: boolean;
}

const STATUS_COLORS: Record<string, string> = {
  working: '#22C55E',
  charging: '#3B82F6',
  idle: '#9CA3AF',
  paused: '#F59E0B',
  error: '#EF4444',
  offline: '#DC2626',
};

const STATUS_LABELS: Record<string, string> = {
  working: 'å·¥ä½œä¸­',
  charging: 'å……ç”µä¸­',
  idle: 'ç©ºé—²',
  paused: 'æš‚åœ',
  error: 'æ•…éšœ',
  offline: 'ç¦»çº¿',
};

export const RobotStatusChart: React.FC<RobotStatusChartProps> = ({
  data,
  loading,
}) => {
  if (loading) {
    return (
      <div className="bg-white rounded-lg border p-6">
        <div className="h-4 bg-gray-200 rounded w-1/3 mb-4" />
        <div className="h-64 bg-gray-100 rounded animate-pulse" />
      </div>
    );
  }

  if (!data) return null;

  const chartData = Object.entries(data)
    .filter(([_, value]) => value > 0)
    .map(([key, value]) => ({
      name: STATUS_LABELS[key] || key,
      value,
      color: STATUS_COLORS[key] || '#6B7280',
    }));

  const total = Object.values(data).reduce((sum, v) => sum + v, 0);

  return (
    <div className="bg-white rounded-lg border p-6">
      <h3 className="text-lg font-semibold text-gray-900 mb-4">æœºå™¨äººçŠ¶æ€åˆ†å¸ƒ</h3>
      
      <div className="h-64">
        <ResponsiveContainer width="100%" height="100%">
          <PieChart>
            <Pie
              data={chartData}
              cx="50%"
              cy="50%"
              innerRadius={60}
              outerRadius={80}
              paddingAngle={2}
              dataKey="value"
              label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}
              labelLine={false}
            >
              {chartData.map((entry, index) => (
                <Cell key={index} fill={entry.color} />
              ))}
            </Pie>
            <Tooltip
              formatter={(value: number) => [`${value} å°`, 'æ•°é‡']}
            />
          </PieChart>
        </ResponsiveContainer>
      </div>

      {/* å›¾ä¾‹ */}
      <div className="mt-4 grid grid-cols-3 gap-2 text-sm">
        {chartData.map((item, index) => (
          <div key={index} className="flex items-center">
            <div
              className="w-3 h-3 rounded-full mr-2"
              style={{ backgroundColor: item.color }}
            />
            <span>{item.name}: {item.value}</span>
          </div>
        ))}
      </div>

      <div className="mt-4 text-center text-sm text-gray-500">
        å…± {total} å°æœºå™¨äºº
      </div>
    </div>
  );
};
```

#### 4.2.4 ä»»åŠ¡è¿›åº¦å¡ç‰‡

```typescript
// pages/operations/dashboard/components/TaskProgressCard.tsx
import React from 'react';
import { CheckCircleIcon, ClockIcon, PlayCircleIcon, XCircleIcon } from '@heroicons/react/24/solid';
import { TaskProgress, TaskSummary } from '../types';

interface TaskProgressCardProps {
  data?: TaskProgress;
  loading: boolean;
}

const STATUS_CONFIG: Record<string, { icon: React.ElementType; color: string; label: string }> = {
  completed: { icon: CheckCircleIcon, color: 'text-green-500', label: 'å·²å®Œæˆ' },
  in_progress: { icon: PlayCircleIcon, color: 'text-blue-500', label: 'è¿›è¡Œä¸­' },
  pending: { icon: ClockIcon, color: 'text-gray-400', label: 'å¾…æ‰§è¡Œ' },
  failed: { icon: XCircleIcon, color: 'text-red-500', label: 'å¤±è´¥' },
};

export const TaskProgressCard: React.FC<TaskProgressCardProps> = ({
  data,
  loading,
}) => {
  if (loading) {
    return (
      <div className="bg-white rounded-lg border p-6">
        <div className="h-4 bg-gray-200 rounded w-1/3 mb-4" />
        <div className="h-4 bg-gray-200 rounded-full mb-4" />
        <div className="space-y-3">
          {[1, 2, 3].map(i => (
            <div key={i} className="h-12 bg-gray-100 rounded animate-pulse" />
          ))}
        </div>
      </div>
    );
  }

  if (!data) return null;

  const progressPercent = data.total > 0 
    ? Math.round((data.completed / data.total) * 100) 
    : 0;

  return (
    <div className="bg-white rounded-lg border p-6">
      <h3 className="text-lg font-semibold text-gray-900 mb-4">ä»Šæ—¥ä»»åŠ¡è¿›åº¦</h3>

      {/* è¿›åº¦æ¡ */}
      <div className="mb-4">
        <div className="flex justify-between text-sm mb-1">
          <span>å®Œæˆè¿›åº¦</span>
          <span className="font-medium">{progressPercent}%</span>
        </div>
        <div className="w-full h-3 bg-gray-200 rounded-full overflow-hidden">
          <div
            className="h-full bg-green-500 rounded-full transition-all duration-500"
            style={{ width: `${progressPercent}%` }}
          />
        </div>
        <div className="mt-1 text-sm text-gray-500">
          å·²å®Œæˆ: {data.completed} / {data.total} ä»»åŠ¡
        </div>
      </div>

      {/* ä»»åŠ¡ç»Ÿè®¡ */}
      <div className="grid grid-cols-4 gap-2 mb-4 text-center text-sm">
        <div className="p-2 bg-green-50 rounded">
          <div className="font-semibold text-green-600">{data.completed}</div>
          <div className="text-gray-500">å·²å®Œæˆ</div>
        </div>
        <div className="p-2 bg-blue-50 rounded">
          <div className="font-semibold text-blue-600">{data.inProgress}</div>
          <div className="text-gray-500">è¿›è¡Œä¸­</div>
        </div>
        <div className="p-2 bg-gray-50 rounded">
          <div className="font-semibold text-gray-600">{data.pending}</div>
          <div className="text-gray-500">å¾…æ‰§è¡Œ</div>
        </div>
        <div className="p-2 bg-red-50 rounded">
          <div className="font-semibold text-red-600">{data.failed}</div>
          <div className="text-gray-500">å¤±è´¥</div>
        </div>
      </div>

      {/* ä»»åŠ¡åˆ—è¡¨ */}
      <div className="space-y-2 max-h-48 overflow-y-auto">
        {data.tasks.slice(0, 5).map((task) => {
          const config = STATUS_CONFIG[task.status];
          const Icon = config.icon;
          
          return (
            <div
              key={task.id}
              className="flex items-center justify-between p-2 bg-gray-50 rounded hover:bg-gray-100"
            >
              <div className="flex items-center">
                <Icon className={`w-5 h-5 ${config.color} mr-2`} />
                <span className="text-sm font-medium">{task.name}</span>
              </div>
              <div className="text-sm text-gray-500">
                {task.status === 'completed' && task.completedTime
                  ? new Date(task.completedTime).toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' }) + ' å®Œæˆ'
                  : task.status === 'in_progress'
                    ? 'è¿›è¡Œä¸­...'
                    : new Date(task.scheduledTime).toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' })
                }
              </div>
            </div>
          );
        })}
      </div>

      {data.tasks.length > 5 && (
        <div className="mt-3 text-center">
          <a href="/operations/tasks" className="text-sm text-blue-600 hover:underline">
            æŸ¥çœ‹å…¨éƒ¨ä»»åŠ¡ â†’
          </a>
        </div>
      )}
    </div>
  );
};
```

---

## 5. æµ‹è¯•è¦æ±‚

### 5.1 å•å…ƒæµ‹è¯•

```typescript
// pages/operations/dashboard/__tests__/OperationsDashboard.test.tsx
import { render, screen, waitFor } from '@testing-library/react';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { OperationsDashboard } from '../index';

const mockKPIData: KPIData = {
  completionRate: { value: 0.875, trend: 2.3, target: 0.85 },
  efficiency: { value: 156, trend: 5.2, target: 150 },
  robotOnline: { online: 8, total: 10, trend: -1 },
  pendingAlerts: { count: 3, trend: 1, bySeverity: { critical: 1, high: 1, medium: 1, low: 0 } },
};

const queryClient = new QueryClient({
  defaultOptions: { queries: { retry: false } },
});

jest.mock('../../../api/data', () => ({
  fetchKPIOverview: jest.fn().mockResolvedValue(mockKPIData),
  fetchRobotStatusDistribution: jest.fn().mockResolvedValue({
    working: 5, charging: 2, idle: 1, paused: 0, error: 0, offline: 2,
  }),
  fetchTaskProgress: jest.fn().mockResolvedValue({
    total: 16, completed: 12, inProgress: 1, pending: 3, failed: 0, tasks: [],
  }),
  fetchEfficiencyTrend: jest.fn().mockResolvedValue([]),
  fetchAlerts: jest.fn().mockResolvedValue({ items: [], total: 0 }),
}));

describe('OperationsDashboard', () => {
  test('renders KPI cards', async () => {
    render(
      <QueryClientProvider client={queryClient}>
        <OperationsDashboard />
      </QueryClientProvider>
    );

    await waitFor(() => {
      expect(screen.getByText('æ¸…æ´å®Œæˆç‡')).toBeInTheDocument();
      expect(screen.getByText('87.5%')).toBeInTheDocument();
    });
  });

  test('displays correct status colors based on thresholds', async () => {
    // æµ‹è¯•é˜ˆå€¼åˆ¤æ–­
  });

  test('handles filter changes', async () => {
    // æµ‹è¯•ç­›é€‰åŠŸèƒ½
  });

  test('auto-refreshes data', async () => {
    // æµ‹è¯•è‡ªåŠ¨åˆ·æ–°
  });
});
```

---

## 6. éªŒæ”¶æ ‡å‡†

### 6.1 åŠŸèƒ½éªŒæ”¶

| éªŒæ”¶é¡¹ | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
|-------|---------|-------|
| KPIå±•ç¤º | 4ä¸ªKPIå¡ç‰‡æ­£ç¡®æ˜¾ç¤ºæ•°å€¼å’Œè¶‹åŠ¿ | P0 |
| çŠ¶æ€åˆ¤æ–­ | æ ¹æ®é˜ˆå€¼æ­£ç¡®æ˜¾ç¤ºæ­£å¸¸/è­¦å‘Š/ä¸¥é‡çŠ¶æ€ | P0 |
| é¥¼å›¾å±•ç¤º | æœºå™¨äººçŠ¶æ€åˆ†å¸ƒé¥¼å›¾æ­£ç¡®æ¸²æŸ“ | P0 |
| ä»»åŠ¡è¿›åº¦ | è¿›åº¦æ¡å’Œä»»åŠ¡åˆ—è¡¨æ­£ç¡®æ˜¾ç¤º | P0 |
| è¶‹åŠ¿å›¾ | æ•ˆç‡è¶‹åŠ¿æŠ˜çº¿å›¾æ­£ç¡®æ¸²æŸ“ | P1 |
| å‘Šè­¦åˆ—è¡¨ | æœ€æ–°å‘Šè­¦æ­£ç¡®æ˜¾ç¤º | P1 |
| ç­›é€‰åŠŸèƒ½ | æ¥¼å®‡/æ¥¼å±‚/æ—¶é—´ç­›é€‰æ­£å¸¸å·¥ä½œ | P1 |
| è‡ªåŠ¨åˆ·æ–° | æŒ‰é…ç½®é—´éš”è‡ªåŠ¨åˆ·æ–°æ•°æ® | P2 |

### 6.2 æ€§èƒ½è¦æ±‚

| æŒ‡æ ‡ | è¦æ±‚ |
|-----|------|
| é¦–å±åŠ è½½ | < 1s |
| æ•°æ®åˆ·æ–° | < 500ms |
| å›¾è¡¨æ¸²æŸ“ | < 200ms |
| å†…å­˜å ç”¨ | < 50MB |

---

*æ–‡æ¡£ç»“æŸ*
